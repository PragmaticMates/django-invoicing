[pytest]
DJANGO_SETTINGS_MODULE = invoicing.tests.test_settings
python_files = test_*.py
python_classes = Test*
python_functions = test_*
testpaths = invoicing/tests
# Disable manage.py lookup; we use invoicing.tests.test_settings and no manage.py.
django_find_project = false
# Add project root so "invoicing" is importable (fixes ImportError when running pytest).
pythonpath = .

addopts = 
    --verbose
    --strict-markers
    --tb=short
    --reuse-db
    --nomigrations
    --cov=invoicing
    --cov-report=html
    --cov-report=term-missing:skip-covered
    # Coverage threshold is enforced externally; do not fail the test run here.

markers =
    slow: marks tests as slow (deselect with '-m "not slow"')
    integration: marks tests as integration tests
    unit: marks tests as unit tests
    models: marks tests related to models
    querysets: marks tests related to querysets
    exporters: marks tests related to exporters
    taxation: marks tests related to taxation


